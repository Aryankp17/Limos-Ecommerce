<%- include('./partials/header') %>
<link rel="stylesheet" href="/public/stylesheets/profile.css">

<% if(success.length >0){ %>
     <%- include('./partials/flash-msg',{color:'blue', message:success}) %>
<% } %>

<div class="container">
    <div class="img-box">
        <h3>Profile Image</h3>
        <% if(user.profilepic && user.profilepic.Image){ %>
            <img id="profileimg" src="data:image/jpeg;base64,<%= user.profilepic.Image.toString('base64') %>" alt="">
        <% }else{ %>
            <img id="profileimg" src="/public/images/uploads/Default.png" alt="">
        <% } %>
        
        <label title="Update profile image" for="profilepic"><img id="edit-img" src="/public/images/icon/profileEdit.svg" alt=""></label>

    </div>
    <div class="profile-info">
        <form action="/user/profileupdate" method="POST" enctype="multipart/form-data">
            <h2>Profile Information</h2>
            <input id="profilepic" type="file" hidden name="profilepic">

            <div class="info-name">
                <label for="name">Full Name</label>
                <input type="text" id="name" name="fullname" value="<%= user.fullname %>" required>
            </div>
            <div class="info-email">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" value="<%= user.email %>" required>
            </div>
            <div class="info-password">
                <label for="password">Update Password</label>
                <input type="password" id="password" name="password" placeholder="Update Password">
            </div>
            <div class="info-number">
                <label for="number">Phone Number</label>
                <input type="number" id="number" name="number" placeholder="Update Phone Number" value="<%= user.number %>" required >
            </div>
            <button type="submit">Update Profile</button>
            
        </form>
    </div>

</div>
<%- include('./partials/footer') %>